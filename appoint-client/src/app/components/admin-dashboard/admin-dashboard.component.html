<div class="dashboard-container">
  <!-- Top Toolbar -->
  <header class="toolbar">
    <span>Admin Dashboard</span>
    <span class="spacer"></span>
    <span>Welcome, {{ userName }}</span>
    <button class="btn btn-secondary" (click)="logout()">Logout</button>
  </header>

  <!-- Calendar -->
  <div class="calendar-wrapper">
    <full-calendar [options]="calendarOptions"></full-calendar>
  </div>
</div>

<!-- Assign Doctor Modal -->
<div *ngIf="showAssignDialog" class="modal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Assign Doctor to Request</h2>
    <div class="modal-body">
      <div class="request-details">
        <p><strong>Date:</strong> {{ currentRequest?.requestDate | date:'fullDate' }}</p>
        <p><strong>Time:</strong></p>
        <p class="detail-value">{{ currentRequest?.startTime | timeFormat }} - {{ currentRequest?.endTime | timeFormat }}</p>
        <p><strong>Status:</strong></p>
        <p class="detail-value">{{ getStatusName(currentRequest?.status) }}</p>
      </div>

      <hr>

      <div class="actions-section">
        <button class="btn btn-primary" (click)="findDoctors()" [disabled]="loading">
          {{ loading ? 'Searching...' : 'Find Available Doctors' }}
        </button>
      </div>

      <div *ngIf="searched && availableDoctors.length === 0" class="no-doctors">
        <span class="warning-icon">‚ö†Ô∏è</span>
        <p>No doctors available for this time slot</p>
      </div>

      <ul *ngIf="availableDoctors.length > 0" class="doctor-list">
        <h3>Available Doctors</h3>
        <li *ngFor="let doctor of availableDoctors" class="doctor-item">
          <span class="person-icon">üë§</span>
          <div class="doctor-name">{{ doctor.doctorName }}</div>
          <button class="btn btn-accent" (click)="assignDoctor(doctor)">
            Assign
          </button>
        </li>
      </ul>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>

<!-- Alert Modal -->
<app-alert-modal
  *ngIf="showAlert"
  [title]="alertTitle"
  [message]="alertMessage"
  [type]="alertType"
  (closed)="closeAlert()">
</app-alert-modal>